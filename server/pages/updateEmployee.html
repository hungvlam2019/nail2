<html>
    <body onload="loadEmployee()">
            <h2>Update Employee <span id="updateEmployeeName_title"></span></h2>
            <table>
                <tr><td><label for="firstName">First name:</label></td><td><input type="text" id="firstName" name="firstName"></td></tr>
                <tr><td><label for="lastName">Last name:</label></td><td><input type="text" id="lastName" name="lastName"></td></tr>
                <tr><td><label for="nickName">Nick name:</label></td><td><input type="text" id="nickName" name="nickName"></td></tr>
                <tr><td><label for="phoneNumber">Phone number:</label></td><td><input type="text" id="phoneNumber" name="phoneNumber"></td></tr>
                <tr><td><label for="payRate">Pay rate:</label></td><td><input type="text" id="payRate" name="payRate"></td></tr>
                <tr><td><label for="checkRate">Check rate:</label></td><td><input type="text" id="checkRate" name="checkRate"></td></tr>
            </table>
            <button id="Update" onclick="updateEmployee()">Update</button>
            <button id="Show Employees" onclick="showEmployees()">Show Employees</button>

        <script>
            function loadEmployee() {
                var xhr = new XMLHttpRequest();
                xhr.open('GET', '/employees/{{EMPLOYEE_ID}}');
                xhr.setRequestHeader('Content-Type', 'application/json');
                xhr.onreadystatechange = () => {
                    if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
                        var employeeInfo = JSON.parse(xhr.responseText);
                        console.log('data: ' + JSON.stringify(employeeInfo));
                        document.getElementById('firstName').value = employeeInfo.firstName;
                        document.getElementById('lastName').value = employeeInfo.lastName;
                        document.getElementById('nickName').value = employeeInfo.nickName;
                        document.getElementById('phoneNumber').value = employeeInfo.phoneNumber;
                        document.getElementById('payRate').value = employeeInfo.payRate;
                        document.getElementById('checkRate').value = employeeInfo.checkRate;
                    }
                };
                xhr.send(null);
            }

            function showEmployees() {
                window.location.href = "/showEmployees";
            }

            function updateEmployee() {                
                var firstName = document.getElementById('firstName').value;
                var lastName = document.getElementById('lastName').value;
                var nickName = document.getElementById('nickName').value;
                var phoneNumber = document.getElementById('phoneNumber').value;
                var payRate = document.getElementById('payRate').value;
                var checkRate = document.getElementById('checkRate').value;
                const data = {
                    "firstName": firstName,
                    "lastName": lastName,
                    "nickName": nickName,
                    "phoneNumber": phoneNumber,
                    "payRate": payRate,
                    "checkRate": checkRate
                };
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                   if (xhttp.readyState == XMLHttpRequest.DONE) {
                     if (xhttp.status === 0 || (xhttp.status >= 200 && xhttp.status < 400)) {
                        window.location.href = '/showEmployees';
                     }
                   }                    
                };
                xhttp.open('PUT', '/employees/{{EMPLOYEE_ID}}', true);
                xhttp.setRequestHeader('Content-Type', 'application/json');
                xhttp.send(JSON.stringify(data));              
            }
        </script>
        
    </body>
</html>